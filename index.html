<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>For Dhia — From Nik</title>
<meta name="description" content="A cinematic apology — for Dhia, from Nik. River Flows in You plays softly." />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#120609;            /* near-black maroon */
    --panel:#210a0b;         /* deep panel */
    --muted:#bfa6a6;
    --text:#f7eaea;
    --accent:#9e1f2b;        /* deep rose */
    --glow: rgba(158,31,43,.18);
    --gold: #cfa76c;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    font-family:Poppins, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color:var(--text);
    background: radial-gradient(1000px 600px at 10% 10%, rgba(158,31,43,0.06), transparent 30%),
                radial-gradient(900px 700px at 90% 90%, rgba(0,0,0,0.25), transparent 30%),
                var(--bg);
    overflow-x:hidden;
  }
  .container{width:min(1080px,94%); margin:inline:auto}
  header{position:sticky; top:0; z-index:40; padding:14px 0; background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,0)); border-bottom:1px solid rgba(255,255,255,.03)}
  .nav{display:flex; align-items:center; justify-content:space-between; gap:12px}
  .brand{font-family:"Great Vibes", "Playfair Display", serif; font-size:1.25rem; color:var(--text); letter-spacing:0.6px}
  .brand small{display:block; font-family: "Poppins"; font-size:.75rem; color:var(--muted); margin-top:2px}
  .btn{font-weight:600; border-radius:12px; padding:.6rem .95rem; cursor:pointer; border:1px solid transparent}
  .btn.ghost{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,.03)}
  .hero{display:grid; grid-template-columns:1fr .9fr; gap:28px; align-items:center; padding:64px 0}
  h1,h2,h3{font-family:"Playfair Display", serif; margin:.2rem 0}
  h1{font-size:clamp(2rem,4vw,3.4rem); color:var(--text); text-shadow:0 6px 20px rgba(0,0,0,.6)}
  .lead{color:var(--muted); font-size:1.05rem; max-width:48ch}
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    border-radius:16px; padding:20px; border:1px solid rgba(255,255,255,.03);
    box-shadow: 0 10px 36px rgba(0,0,0,.6);
  }

  /* cinematic petals */
  .petal {
    position:fixed; top:-10vh; width:36px; height:36px; pointer-events:none; z-index:1;
    transform-origin:center;
    animation:petalFall linear forwards;
    opacity:.95;
  }
  .petal::before{ content:"🥀"; font-size:28px; display:block; filter:drop-shadow(0 6px 10px rgba(0,0,0,.6)); }
  @keyframes petalFall {
    0% { transform: translateY(0) rotate(0) scale(.9); opacity:1; }
    100% { transform: translateY(120vh) rotate(360deg) scale(1.05); opacity:0; }
  }

  /* Letters grid */
  .section{padding:26px 0; position:relative; z-index:5}
  .letters-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:18px}
  .letter{
    padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    border:1px solid rgba(255,255,255,.03); box-shadow: 0 8px 30px rgba(0,0,0,.6);
    transition:transform .25s ease, box-shadow .25s ease;
  }
  .letter:hover{ transform:translateY(-6px); box-shadow:0 20px 50px rgba(0,0,0,.7)}
  .letter .tag{font-size:.85rem; color:var(--gold); font-weight:600; margin-bottom:.45rem; letter-spacing:.3px}
  .letter p{color:var(--muted); line-height:1.6; margin:0; font-size:1rem}
  .final{padding:32px; text-align:center; font-size:1.1rem; color:var(--text); background:linear-gradient(180deg, rgba(158,31,43,.04), rgba(0,0,0,.1)); border-radius:14px; margin-top:8px}

  /* typewriter cursor */
  .cursor{border-right:2px solid var(--accent); padding-right:4px}

  /* music button */
  #musicButton {
    position: fixed;
    right: 22px;
    bottom: 22px;
    z-index:60;
    width:66px;
    height:66px;
    border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    cursor:pointer;
    background: radial-gradient(circle at 30% 30%, #ff6b6b, #6b0000);
    box-shadow: 0 0 28px rgba(158,31,43,0.45), 0 8px 30px rgba(0,0,0,.6);
    transition: transform .18s ease, box-shadow .3s ease, opacity .2s ease;
  }
  #musicButton:hover{ transform: scale(1.06); box-shadow: 0 0 40px rgba(158,31,43,0.6) }
  #musicButton.playing{ animation:heartbeat 2.2s infinite; box-shadow:0 0 44px rgba(255,80,80,0.6); }
  #musicButton .label{ position:absolute; right:90px; bottom:20px; background:rgba(0,0,0,.55); padding:8px 12px; border-radius:8px; color:var(--text); font-size:.85rem; display:none; }
  #musicButton:hover .label{ display:block }
  @keyframes heartbeat {
    0%,100%{ transform:scale(1) } 50%{ transform:scale(1.14) }
  }

  /* entrance overlay */
  #entranceOverlay{
    position:fixed; inset:0; z-index:80; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,.72));
    backdrop-filter: blur(6px);
  }
  .entranceBox{
    width:min(880px,92%); padding:32px; border-radius:14px; text-align:center;
    background: linear-gradient(180deg, rgba(20,6,7,.9), rgba(15,6,6,.85));
    border:1px solid rgba(255,255,255,.03);
    box-shadow: 0 30px 80px rgba(0,0,0,.8);
  }
  .entranceBox h2{ color:var(--text); font-family:"Playfair Display"; margin-bottom:.35rem }
  .entranceBox p{ color:var(--muted); font-size:1.05rem; line-height:1.7; margin:0 auto 18px; max-width:56ch }
  .entrBtn{ display:inline-flex; gap:10px; margin-top:14px; flex-wrap:wrap; justify-content:center }
  .entrBtn button{ padding:12px 18px; border-radius:12px; border:0; cursor:pointer; font-weight:700}
  .btnProceed{ background: linear-gradient(90deg, #ff6b6b, #b10e1d); color:#fff; box-shadow: 0 10px 40px rgba(177,14,29,.28) }
  .btnLater{ background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,.03) }

  /* small responsive */
  @media (max-width:860px){ .hero{grid-template-columns:1fr} .letters-grid{grid-template-columns:1fr} #musicButton { right:16px; bottom:16px } }
</style>
</head>
<body>

<!-- falling petals container (petals spawn from JS) -->
<div id="petals-root" aria-hidden="true"></div>

<!-- Entrance Overlay -->
<div id="entranceOverlay" role="dialog" aria-modal="true">
  <div class="entranceBox">
    <div style="font-family:'Great Vibes', serif; font-size:1.05rem; color:var(--gold); letter-spacing:.08em">for Dhia</div>
    <h2>Before you enter…</h2>
    <p id="typeLine"><span class="cursor"></span></p>
    <div class="entrBtn">
      <button id="entranceYes" class="btnProceed btn">Read it…</button>
      <button id="entranceNo" class="btnLater btn">Not now</button>
    </div>
    <p style="color:var(--muted); margin-top:12px; font-size:.92rem">This is my apology & my truth. I do not expect anything but honesty, and I will accept whatever you choose.</p>
  </div>
</div>

<header>
  <nav class="container nav">
    <div>
      <div class="brand">For Dhia <small>— From Nik</small></div>
    </div>
    <div>
      <button class="btn ghost" onclick="document.getElementById('letters').scrollIntoView({behavior:'smooth'})">Letters I Never Sent</button>
    </div>
  </nav>
</header>

<main class="container">
  <section class="hero">
    <div>
      <h1>Hi Dhia,</h1>
      <p class="lead">This page is not to beg. It is to be honest, to say what I should have said before. If you read anything here, know that every word is sincere.</p>
      <div style="margin-top:18px;">
        <button class="btn ghost" onclick="document.getElementById('unlock').scrollIntoView({behavior:'smooth'})">Unlock the Letters</button>
      </div>
    </div>

    <div class="card">
      <h3 style="font-family:'Great Vibes', serif; font-size:1.4rem; color:var(--text); margin-bottom:.3rem">A second chance, written in roses</h3>
      <p style="color:var(--muted)">I made this so that when you are ready, you can read... and know I tried to make things right. No pressure. Just truth.</p>
      <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
        <div style="font-size:.95rem; color:var(--muted)">— Nik</div>
      </div>
    </div>
  </section>

  <!-- Unlock (passcode) -->
  <section id="unlock" class="section">
    <div style="max-width:760px; margin-inline:auto; text-align:center;">
      <h2 style="font-family:'Playfair Display'; margin-bottom:.25rem">For Dhia — Unlock Letters</h2>
      <p style="color:var(--muted)">Enter the passcode I gave you to open my letters. (Hint: lagu I minta you nyanyikan :))</p>
      <form id="unlockForm" style="display:flex; gap:10px; justify-content:center; margin-top:12px; flex-wrap:wrap;">
        <input id="passcode" type="password" placeholder="Enter passcode" autocomplete="off" style="padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.03); background:rgba(255,255,255,.02); color:var(--text); min-width:220px;">
        <button class="btn btnProceed" type="submit">Unlock</button>
      </form>
      <div id="unlockMsg" style="margin-top:10px; color:var(--muted)"></div>
    </div>
  </section>

  <!-- Letters (locked by default) -->
  <section id="letters" class="section" style="display:none">
    <h2 style="text-align:center; margin-bottom:12px">Letters I Never Sent</h2>
    <div class="letters-grid">
      <article class="letter">
        <div class="tag">Letter 1 — The Apology</div>
        <p>Dhia, I am sorry. For the words I used when you needed softness. For the silence when you needed my voice. I was flawed, and I hurt you in ways I cannot undo. I say sorry because I must — not to erase the past, but to acknowledge it fully.</p>
      </article>

      <article class="letter">
        <div class="tag">Letter 2 — What I Miss</div>
        <p>I miss the way your laugh filled even the quiet moments. I miss your little messages in the middle of the day, your patient listening, the way you made ordinary things feel safe. I took much of that for granted — and I am regretful every day.</p>
      </article>

      <article class="letter">
        <div class="tag">Letter 3 — If I Could Go Back</div>
        <p>If I could go back, I would listen twice as long as I speak. I would hold your hand through things I didn’t understand. I would choose care over pride every single time. I cannot change the past, but I can be better now.</p>
      </article>

      <article class="letter">
        <div class="tag">Letter 4 — My Promise</div>
        <p>I am not asking for forgiveness as a demand. I am asking for the chance to show change — patient, humble, consistent change. If you ever allow me a second chance, I will spend it proving these words are lived, not just written.</p>
      </article>

      <article class="letter">
        <div class="tag">Letter 5 — Always You</div>
        <p>No matter where life leads, my heart remembers you first. I will always wish your happiness, even if it is not with me. Thank you for every moment you gave — I carry them with care and regret, and I promise to be better.</p>
      </article>
    </div>

    <div class="final" style="margin-top:20px">
      <p style="margin:0 0 10px">If you read to the end, thank you. That means more than I can say. If you forgive, I will be grateful. If you do not, I will still wish you the best.</p>
      <div style="font-family:'Great Vibes', serif; font-size:1.2rem; margin-top:12px; color:var(--gold)">— Nik </div>
    </div>
  </section>

  <!-- prayers / reflections -->
  <section id="dua" class="section">
    <h2 style="text-align:center; margin-bottom:12px">Prayers & Reflections</h2>
    <div style="max-width:820px; margin-inline:auto; color:var(--muted); line-height:1.7; text-align:center;">
      <blockquote style="margin:0 0 10px; font-style:italic; color:var(--muted)">"Indeed, Allah is Forgiving and Merciful."</blockquote>
      <p style="margin:0">I pray that whatever you choose brings you serenity. My deepest hope is in your peace. That you sleep well, laugh often, and find light in small things.</p>
    </div>
  </section>

  <!-- final message (cinematic overlay later) -->
  <section id="end" class="section" style="display:none">
    <div style="max-width:760px; margin-inline:auto; text-align:center">
      <div style="font-size:1.05rem; color:var(--muted)">If you’re reading this, thank you for giving me a chance to be heard.</div>
      <div style="margin-top:16px; font-family:'Great Vibes', serif; font-size:1.4rem; color:var(--text)">— Nik </div>
    </div>
  </section>

  <footer style="padding:36px 0 80px; text-align:center; color:var(--muted)">
    <div style="max-width:760px; margin-inline:auto">Made with sincerity and regret by Nik.</div>
  </footer>
</main>

<!-- Music button & hidden player -->
<div id="musicButton" aria-label="Play music" title="Play River Flows in You">
  <span id="musicIcon" style="font-size:22px; color:#fff">▶️</span>
  <div class="label">River Flows in You — Yiruma</div>
</div>

<div id="yt-container" style="position:fixed; left:-9999px; width:0; height:0; overflow:hidden;"><div id="ytplayer"></div></div>

<!-- YouTube API -->
<script src="https://www.youtube.com/iframe_api"></script>

<script>
/* ---------- Config ---------- */
const PASSCODE = 'sempurna'; // case-insensitive

/* ---------- Petals (spawn) ---------- */
function spawnPetal(){
  const root = document.getElementById('petals-root');
  const el = document.createElement('div');
  el.className = 'petal';
  el.style.left = (Math.random()*100) + 'vw';
  el.style.animationDuration = (6 + Math.random()*6) + 's';
  el.style.opacity = (0.7 + Math.random()*0.3);
  el.style.transform = 'translateY(0) rotate(' + (Math.random()*360) + 'deg) scale(' + (0.9 + Math.random()*0.3) + ')';
  // slight horizontal drift via translateX animation using CSS variable
  el.style.setProperty('--drift', (Math.random()*40 - 20) + 'px');
  root.appendChild(el);
  setTimeout(()=> el.remove(), 14000);
}
let petalInterval;
function startPetals(){
  if(petalInterval) return;
  petalInterval = setInterval(spawnPetal, 550);
}

/* ---------- Entrance Typewriter & Buttons ---------- */
(function(){
  const overlay = document.getElementById('entranceOverlay');
  const yesBtn  = document.getElementById('entranceYes');
  const noBtn   = document.getElementById('entranceNo');
  const target  = document.getElementById('typeLine');
  const cursorSpan = target.querySelector('.cursor');

  const line = "This page is only for you, Dhia. I know I hurt you — I am sorry. Let me say what my heart could not say before. 🌹";
  let i = 0;
  function typeNext(){
    target.innerHTML = line.slice(0,i) + '<span class="cursor"></span>';
    i++;
    if(i <= line.length) setTimeout(typeNext, 28);
    else cursorBlink();
  }
  function cursorBlink(){
    const cur = target.querySelector('.cursor');
    if(!cur) return;
    setInterval(()=> cur.style.visibility = (cur.style.visibility === 'hidden' ? 'visible' : 'hidden'), 520);
  }
  typeNext();

  yesBtn.addEventListener('click', ()=>{
    overlay.style.transition = 'opacity .7s ease';
    overlay.style.opacity = '0';
    setTimeout(()=> {
      overlay.style.display = 'none';
      // start cinematic petals and small intro visual
      startPetals();
      // optionally scroll to unlock
      document.getElementById('unlock').scrollIntoView({behavior:'smooth'});
    }, 700);
  });

  noBtn.addEventListener('click', ()=>{
    overlay.style.transition = 'opacity .4s ease';
    overlay.style.opacity = '0';
    setTimeout(()=> {
      overlay.style.display = 'none';
      const msg = document.createElement('div');
      msg.style.position='fixed'; msg.style.left='50%'; msg.style.top='20%';
      msg.style.transform='translateX(-50%)'; msg.style.color='var(--muted)';
      msg.style.background='rgba(0,0,0,.5)'; msg.style.padding='12px 18px'; msg.style.borderRadius='10px';
      msg.style.zIndex = 90;
      msg.textContent = "It's okay. I'll wait, Dhia.";
      document.body.appendChild(msg);
      startPetals();
      setTimeout(()=> msg.remove(), 2600);
    }, 400);
  });
})();

/* ---------- YouTube player & music button ---------- */
let player, isPlaying = false;
function onYouTubeIframeAPIReady(){
  player = new YT.Player('ytplayer', {
    height: '0',
    width: '0',
    videoId: '7maJOI3QMu0', // Yiruma - River Flows in You (common upload id)
    playerVars: {
      autoplay: 1,
      controls: 0,
      loop: 1,
      playlist: '7maJOI3QMu0',
      modestbranding: 1,
      rel: 0
    },
    events: {
      onReady: (e) => {
        e.target.mute(); // start muted so browsers allow autoplay
        e.target.playVideo();
        isPlaying = true;
        updateMusicButton();
      },
      onStateChange: (e) => {
        // sync state; (1 = playing)
        isPlaying = (e.data === 1);
        updateMusicButton();
      }
    }
  });
}

const musicBtn = document.getElementById('musicButton');
const musicIcon = document.getElementById('musicIcon');
musicBtn.addEventListener('click', () => {
  if(!player) return;
  if(isPlaying){
    player.pauseVideo();
    isPlaying = false;
  } else {
    player.playVideo();
    isPlaying = true;
    // ensure audible
    player.unMute();
    player.setVolume(45);
  }
  updateMusicButton();
});

function updateMusicButton(){
  if(isPlaying){
    musicBtn.classList.add('playing');
    musicIcon.textContent = '❤️';
    musicBtn.setAttribute('aria-label','Pause River Flows in You');
  } else {
    musicBtn.classList.remove('playing');
    musicIcon.textContent = '▶️';
    musicBtn.setAttribute('aria-label','Play River Flows in You');
  }
}

/* ---------- Unlock logic (passcode protected) ---------- */
document.getElementById('unlockForm').addEventListener('submit', function(e){
  e.preventDefault();
  const input = (document.getElementById('passcode').value || '').trim().toLowerCase();
  const msg   = document.getElementById('unlockMsg');
  if(input === PASSCODE){
    msg.textContent = 'Unlocked — thank you for reading. 🙏';
    // reveal letters with cinematic fade
    const letters = document.getElementById('letters');
    letters.style.opacity = 0;
    letters.style.display = 'block';
    setTimeout(()=> { letters.style.transition = 'opacity .7s ease'; letters.style.opacity = 1; }, 40);
    // gently scroll to letters
    setTimeout(()=> letters.scrollIntoView({behavior:'smooth'}), 220);
  } else {
    msg.textContent = 'Passcode salah. Cuba lagi ya.';
    msg.style.color = 'var(--muted)';
  }
});

/* ---------- optional: show final section after reading ---------- */
/* When user scrolls to bottom, reveal a cinematic final message */
(function(){
  let shown = false;
  window.addEventListener('scroll', () => {
    const endSection = document.getElementById('end');
    if(!endSection || shown) return;
    const rect = endSection.getBoundingClientRect();
    if(rect.top < window.innerHeight * 0.75){
      endSection.style.display = 'block';
      endSection.style.opacity = 0;
      setTimeout(()=> endSection.style.transition = 'opacity .8s ease', 20);
      setTimeout(()=> endSection.style.opacity = 1, 40);
      shown = true;
    }
  });
})();

/* ---------- start subtle petals silently so page isn't empty if entrance closed manually ---------- */
startPetals();
</script>
</body>
</html>
